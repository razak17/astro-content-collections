---
import { getCollection } from "astro:content";

import Layout from "../layouts/default.astro";
import PostCard from "../components/PostCard.astro";

const posts = await getCollection("blog", ({ data }) => {
  return !data.draft && data.date <= new Date();
});
---

<Layout>
  <h1>Please Read My Excellent Blog</h1>
  <p>
    I write the truth many are too afraid to speak. But I’m not afraid to speak.
    Speaking is just making mouth sounds, and to be honest it’s not very scary.
  </p>
  {
    posts.map((post) => {
      return <PostCard data={post.data} url={post.slug} more />;
    })
  }
</Layout>
